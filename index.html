<!Doctype HTML>
<html>
<head>
	<title>Line Sorter</title>
	<meta charset="utf-8" />
	<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.13/vue.min.js"></script>
	<style>
		*,body,html{background-color:#272822;color:#eee;-webkit-font-smoothing:antialiased;font-family:"Ubuntu Mono"}body{margin:0;overflow:hidden}.container{width:100%}a{cursor:pointer}*{background:#272822}.list{border-bottom:1px dashed rgb(119,119,119);box-sizing:border-box;color:rgb(238,238,238);display:block;float:left;font:18px/28px "Ubuntu Mono";min-height:39px;height:auto;margin-left:10px;margin-right:10px;padding:5px 15px 5px 15px;position:relative;width:298px;-webkit-font-smoothing:antialiased}.mainbody{font-size:16px;line-height:28px;height:100vh;padding-right:0;width:100%}.heading{border-bottom:1px dashed #aaa;height:45px}input{font-size:26px;line-height:28px;font-weight:700;border:none;padding:10px 20px;float:left;height:25px;width:calc(100% - 272px);width:-moz-calc(100% - 272px);width:-webkit-calc(100% - 272px);width:-o-calc(100% - 272px)}.menu{float:right}textarea{border:none;width:calc(100% - 22px);font-size:18px;line-height:20px;resize:none;padding:10px 0 0 20px;height:-moz-calc(100% - 65px);height:-webkit-calc(100% - 65px);height:-o-calc(100% - 65px);height:calc(100% - 65px)}input:focus,select:focus,textarea:focus,button:focus{outline:none}.deleteButton{color:#F44336}.listOptions{float:right;max-height:29px}.list svg{padding-top:5px;cursor:pointer}.list>span{cursor:pointer}.button{box-sizing:border-box;border:none;border-radius:3px;padding:0 5px 0 5px;margin-right:10px;margin-top:8px;width:60px;color:#fff;font-weight:700;color:rgb(255,255,255);cursor:pointer;height:28px;text-size-adjust:100%;width:60px;column-rule-color:rgb(255,255,255);perspective-origin:30px 14px;transform-origin:30px 14px;background:rgb(0,150,136) none repeat scroll 0% 0% / auto padding-box border-box;border:0 none rgb(255,255,255);border-radius:3px 3px 3px 3px;font:normal normal bold normal 16px / 28px "Ubuntu Mono";margin:8px 10px 0 0;outline:rgb(255,255,255) none 0;padding:0 5px}.dangerBackground{background-color:#F44336}.infoBackground{background-color:#009688}.success.container{width:100%}a{cursor:pointer}*{background:#272822}.sidebar{border-right:2px solid #aaa;height:100vh;width:320px;float:left;overflow:auto}.list{border-bottom:1px dashed rgb(119,119,119);box-sizing:border-box;color:rgb(238,238,238);display:block;float:left;font:18px/28px "Ubuntu Mono";min-height:39px;height:auto;margin-left:10px;margin-right:10px;padding:5px 15px 5px 15px;position:relative;width:298px;-webkit-font-smoothing:antialiased}.mainbody{font-size:16px;line-height:28px;height:100vh;padding-right:0;width:100%}.heading{border-bottom:1px dashed #aaa;height:45px;padding-bottom:1px}input{font-size:26px;line-height:28px;font-weight:700;border:none;padding:10px 20px;float:left;height:25px;width:calc(100% - 272px);width:-moz-calc(100% - 272px);width:-webkit-calc(100% - 272px);width:-o-calc(100% - 272px)}.menu{float:right}textarea{border:none;width:calc(100% - 22px);font-size:22px;line-height:28px;resize:none;padding:10px 0 0 20px;height:-moz-calc(100% - 65px);height:-webkit-calc(100% - 65px);height:-o-calc(100% - 65px);height:calc(100% - 65px)}input:focus,select:focus,textarea:focus,button:focus{outline:none}.deleteButton{color:#F44336}.listOptions{float:right;max-height:29px}.list svg{padding-top:5px;cursor:pointer}.list>span{cursor:pointer}.button{box-sizing:border-box;border:none;border-radius:3px;padding:0 5px 0 5px;margin-right:10px;margin-top:8px;width:60px;color:#fff;font-weight:700;color:rgb(255,255,255);cursor:pointer;height:28px;text-size-adjust:100%;width:60px;column-rule-color:rgb(255,255,255);perspective-origin:30px 14px;transform-origin:30px 14px;background:rgb(0,150,136) none repeat scroll 0% 0% / auto padding-box border-box;border:0 none rgb(255,255,255);border-radius:3px 3px 3px 3px;font:normal normal bold normal 16px / 28px "Ubuntu Mono";margin:8px 10px 0 0;outline:rgb(255,255,255) none 0;padding:0 5px}.dangerBackground{background-color:#F44336}.infoBackground{background-color:#009688}.successBackground{background-color:#4CAF50}.danger{color:#F44336}.info{color:#009688}.success{color:#4CAF50}.heading svg{margin-right:5px}::-webkit-scrollbar{width:12px;background:rgba(0,0,0,.61);border-radius:0}::-webkit-scrollbar:hover{background:rgba(0,0,0,.61)}::-webkit-scrollbar-thumb:vertical{background:rgba(0,0,0,.61);border-radius:0}::-webkit-scrollbar-thumb:vertical:active{background:rgba(0,0,0,.61);border-radius:0}Background{background-color:#4CAF50}.danger{color:#F44336}.info{color:#009688}.success{color:#4CAF50}.heading svg{margin-right:5px}::-webkit-scrollbar{width:12px;background:rgba(0,0,0,.61);border-radius:0}::-webkit-scrollbar:hover{background:rgba(0,0,0,.61)}::-webkit-scrollbar-thumb:vertical{background:rgba(0,0,0,.61);border-radius:0}::-webkit-scrollbar-thumb:vertical:active{background:rgba(0,0,0,.61);border-radius:0}
	</style>
</head>

<body>
	<div id="vapp">
		<div class="mainbody">
			<div class="heading">
				<input type="text" placeholder="Json Cleaner">
				<div class="menu">
					<button class="button successBackground" @click="sort()">Clean</button>
					<button class="button infoBackground" @click="content = ''">Clear</button>
				</div>
			</div>
			<textarea v-model="content"></textarea>
		</div>
	</div>

</body>
<script>
	window.addEventListener("load", function () {
		var app = new Vue({
			el: '#vapp',
			data: {
				content: ''
			},
			methods: {
				sort() {
					var text = JSON.parse(this.content);
					this.drop(text);
					this.isEmpty(text);
					this.isEmpty(text);
					this.content = JSON.stringify(text, null, 3);
				},
				isEmpty(x) {
					if (x instanceof Array) {
						if (x.length == 0) {
							return true;
						}
						for (var i = x.length - 1; i >= 0; i--) {
							if (this.isEmpty(x[i])) {
								x.splice(i, 1);
							}
						}
						if (x.length == 0) {
							return true;
						}
					}
					if (typeof x == 'object') {
						var keys = Object.keys(x);
						if (keys.length == 0) {
							return true;
						}
						for (var key of keys) {
							if (this.isEmpty(x[key])) {
								delete x[key];
							}
						}
						if (keys.length == 0) {
							return true;
						}
					}
					return false;
				},
				drop(x) {
					if (x instanceof Array) {
						for (var i = 0; i < x.length; i++) {
							this.drop(x[i]);
						}
					} else if (typeof x == 'object') {
						delete x['pos'];
						delete x['componentPositions'];
						delete x['leftPrec'];
						delete x['rightPrec'];
						delete x['returnTypeInference'];
						delete x['operandTypeChecker'];
						var keys = Object.keys(x);
						for (var key of keys) {
							this.drop(x[key]);
						}
					}
				}
			}
		});
	});
</script>

</html>
